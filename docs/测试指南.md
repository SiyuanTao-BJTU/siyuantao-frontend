# 【思源淘】前端测试指南

---

## 1. 测试策略

为了确保前端代码的质量和稳定性，本项目建议采用以下测试策略：

*   **单元测试 (Unit Testing):** 针对独立的函数、类或纯逻辑代码进行测试，验证其在隔离环境下的行为是否符合预期。覆盖率目标：高。
*   **组件测试 (Component Testing):** 针对 Vue 组件进行测试，验证组件的渲染、交互、Props、Events、Slots 等功能是否正常。覆盖率目标：中高。
*   **端到端测试 (End-to-End Testing / E2E):** 模拟真实用户的使用场景，从用户界面层面测试整个应用流程。覆盖率目标：中低 (主要覆盖关键业务流程)。
*   **手动测试:** 在开发和提测阶段进行必要的手动功能测试和兼容性测试。

## 2. 测试框架与工具 (建议)

本项目推荐使用以下测试框架和工具：

*   **单元测试/组件测试:**
    *   **Vitest:** 一个由 Vite 提供支持的单元测试框架，与 Vite 项目集成紧密，提供快速的测试体验。
    *   **Vue Test Utils:** Vue 官方的测试实用工具库，用于方便地挂载和交互 Vue 组件。
    *   **Jest (备选):** 一个流行的 JavaScript 测试框架，功能全面，如果对 Jest 更熟悉也可以考虑。
*   **端到端测试:**
    *   **Cypress:** 一款强大的 E2E 测试框架，提供友好的 API 和强大的调试能力。
    *   **Playwright (备选):** 微软开发的 E2E 测试框架，支持多种浏览器，功能强大。

## 3. 测试实施

### 3.1 安装依赖

根据选择的测试框架，安装相应的开发依赖。例如，使用 Vitest 和 Vue Test Utils：

```bash
pnpm install -D vitest @vue/test-utils jsdom @vitest/ui
```

### 3.2 配置测试环境

配置测试框架，使其能够正确解析 Vue 单文件组件、处理别名等 Vite/Webpack 特性。Vitest 通常与 Vite 配置集成较好。

### 3.3 编写测试用例

*   **单元测试:** 在与被测试文件相邻的 `__tests__` 目录下创建 `.spec.js` 或 `.test.js` 文件，编写测试逻辑。
*   **组件测试:** 在组件文件所在目录下创建 `[ComponentName].spec.js` 或 `[ComponentName].test.js` 文件。
*   **E2E 测试:** 根据框架的要求组织测试文件和测试步骤。

### 3.4 运行测试

在 `package.json` 中配置测试脚本，例如使用 Vitest：

```json
"scripts": {
  "test": "vitest",
  "test:unit": "vitest --environment jsdom",
  "test:e2e": "cypress open" // 如果使用 Cypress
}
```

运行测试：

```bash
pnpm test # 运行所有测试
pnpm test:unit # 只运行单元/组件测试
```

### 3.5 集成到 CI/CD (可选)

将测试脚本集成到 CI/CD 流水线中，确保每次代码提交或合并请求都会自动运行测试，并在测试失败时阻止合并。

## 4. 测试最佳实践

*   **测试范围:** 确保测试覆盖关键业务逻辑和复杂组件。
*   **测试独立性:** 每个测试用例应独立运行，不依赖于其他测试用例的状态。
*   **可维护性:** 测试代码应清晰、易读、易于维护。
*   **避免测试实现细节:** 测试应该关注组件的公共接口和行为，而不是内部实现细节。
*   **Mocking:** 对于外部依赖（如 API 调用、第三方库），使用 Mocking 技术隔离测试范围。

---

**建议:**

*   团队可以根据项目进展和资源投入，逐步完善测试覆盖率。
*   初期可以重点关注核心模块和复杂组件的单元/组件测试。
*   在项目相对稳定后，可以投入资源建设 E2E 测试，覆盖用户核心流程。 